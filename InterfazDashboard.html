<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Gestión - Café Aroma</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="CSS/EstilosDash.css">
    <script src="JS/desplazamientoPaginas.js" defer></script>
</head>
<body>
    <header class="header">
        <h1>☕ Café Aroma - Sistema de Gestión</h1>
        <nav>
            <button class="nav-btn active" onclick="mostrarSeccion('materia')">Materia Prima</button>
            <button class="nav-btn" onclick="mostrarSeccion('produccion')">Producción</button>
            <button class="nav-btn" onclick="mostrarSeccion('productos')">Productos Terminados</button>
            <button class="nav-btn" onclick="mostrarSeccion('pedidos')">Pedidos y Distribución</button>
            <button class="logout-btn" onclick="cerrarSesion()">Cerrar Sesión</button>
        </nav>
    </header>

    <main class="main-content">
        <section id="materia" class="section active">
            <h2>Gestión de Materia Prima</h2>
            <p>Registrar y actualizar información sobre granos verdes, controlar inventarios y generar órdenes de compra.</p>
            
            <div id="tablaInventario" class="mt-4" ></div>

            <!-- Botón para recargar datos -->
    <button onclick="cargarInventario()" class="bg-green-600 text-white px-4 py-2 rounded mt-3 hover:bg-green-700">
        Actualizar Inventario
    </button>
        </section>





        <section id="produccion" class="section">
            <h2>Gestión de Producción</h2>
            <p>Planificar y controlar los procesos de tostado, molienda y envasado del café gourmet.</p>
        </section>

        <section id="productos" class="section">
            <h2>Gestión de Productos Terminados</h2>
            <p>Registrar lotes terminados, controlar calidad mediante análisis de catación y preparar lotes para distribución.</p>
        </section>

        <section id="pedidos" class="section">
            <h2>Gestión de Pedidos y Distribución</h2>
            <p>Recibir pedidos, planificar rutas de entrega y monitorear las entregas en curso.</p>
        </section>
    </main>

    <script>
        function mostrarSeccion(id) {
            document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
            document.getElementById(id).classList.add('active');

            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        function cerrarSesion() {
            window.location.href = "InterfazInicioRegistro.html"; // Regresa al login
        }
    </script>

<script>
async function cargarInventario() {
    try {
        const respuesta = await fetch('backend/api_inventario.php');
        const inventario = await respuesta.json();

        let html = `
            <table class="table-auto border-collapse border border-gray-400 mt-4">
                <thead>
                    <tr class="bg-gray-100">
                        <th class="border px-4 py-2">Tipo de Grano</th>
                        <th class="border px-4 py-2">Cantidad (kg)</th>
                    </tr>
                </thead>
                <tbody>
        `;

        for (const tipo in inventario) {
            html += `
                <tr>
                    <td class="border px-4 py-2 text-center">${tipo}</td>
                    <td class="border px-4 py-2 text-center">${inventario[tipo]}</td>
                </tr>
            `;
        }

        html += `</tbody></table>`;
        document.getElementById('tablaInventario').innerHTML = html;

    } catch (error) {
        document.getElementById('tablaInventario').innerHTML =
            `<p class="text-red-500">Error al cargar el inventario.</p>`;
        console.error(error);
    }
}

// Llamar automáticamente al cargar la página
document.addEventListener('DOMContentLoaded', cargarInventario);
</script>

</body>
</html>
